(this["webpackJsonplinie-kolejowe-v2"]=this["webpackJsonplinie-kolejowe-v2"]||[]).push([[0],{146:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(18),c=n.n(s),o=(n(146),n(8)),r=n(250),u=n(12),l="SHOW",d="HIDE",h={data:{stations:[],lines:[],speed:null},mobileAnimation:!1,selectedStations:[],selectedLines:[],beginStation:null,endStation:null,departureTime:null,paths:[],maxPaths:3,nextConnectionTime:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{mobileAnimation:!0});case d:return Object(u.a)(Object(u.a)({},e),{},{mobileAnimation:!1});default:return e}},f="LOAD_DATA",p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(u.a)(Object(u.a)({},e),{},{data:t.payload}):e},b=n(65),m="ADD_STATION",v="REMOVE_STATION",O="ADD_LINE",g="REMOVE_LINE",y="REMOVE_ALL_LINES",x="REMOVE_ALL_STATIONS",_="ADD_ALL_LINES",w="ADD_ALL_STATIONS",k=function(){return{type:y,payload:{}}},S=function(){return{type:x,payload:{}}},N="ADD_BEGIN_STATION",T="REMOVE_BEGIN_STATION",D="ADD_END_STATION",A="REMOVE_END_STATION",E="ADD_DEPARTURE_TIME",M="REMOVE_DEPARTURE_TIME",L=function(e){return{type:N,payload:e}},z=function(){return{type:T,payload:{}}},I=function(e){return{type:D,payload:e}},C=function(){return{type:A,payload:{}}},R=function(e){return{type:E,payload:e}},q=function(){return{type:M,payload:{}}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(u.a)(Object(u.a)({},e),{},{beginStation:t.payload});case T:return Object(u.a)(Object(u.a)({},e),{},{beginStation:null});case D:return Object(u.a)(Object(u.a)({},e),{},{endStation:t.payload});case A:return Object(u.a)(Object(u.a)({},e),{},{endStation:null});case E:return Object(u.a)(Object(u.a)({},e),{},{departureTime:t.payload});case M:return Object(u.a)(Object(u.a)({},e),{},{departureTime:null});default:return e}},P="ADD_PATH",U="REMOVE_ALL_PATHS",H="INCREASE_MAX_PATHS",B="RESET_MAX_PATHS",F="ADD_NEXT_CONNECTION_TIME",W="RESET_NEXT_CONNECTION_TIME",V=function(e){return{type:P,payload:e}},K=function(){return{type:U,payload:{}}},Z=function(e){return{type:H,payload:e}},G=function(){return{type:B,payload:{}}},X=function(e){return{type:F,payload:e}},J=function(){return{type:W,payload:{}}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(u.a)(Object(u.a)({},e),{},{paths:[].concat(Object(b.a)(e.paths),[t.payload])});case U:return Object(u.a)(Object(u.a)({},e),{},{paths:[]});case H:return Object(u.a)(Object(u.a)({},e),{},{maxPaths:e.maxPaths+t.payload});case B:return Object(u.a)(Object(u.a)({},e),{},{maxPaths:3});case F:return Object(u.a)(Object(u.a)({},e),{},{nextConnectionTime:t.payload});case W:return Object(u.a)(Object(u.a)({},e),{},{nextConnectionTime:null});default:return e}},$=Object(r.a)({mobileAnimation:j,data:p,selectedData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{selectedStations:[].concat(Object(b.a)(e.selectedStations),[t.payload])});case v:return Object(u.a)(Object(u.a)({},e),{},{selectedStations:e.selectedStations.filter((function(e){return e.id!==t.payload}))});case O:return Object(u.a)(Object(u.a)({},e),{},{selectedLines:[].concat(Object(b.a)(e.selectedLines),[t.payload])});case g:return Object(u.a)(Object(u.a)({},e),{},{selectedLines:e.selectedLines.filter((function(e){return e.name!==t.payload}))});case x:return Object(u.a)(Object(u.a)({},e),{},{selectedStations:[]});case y:return Object(u.a)(Object(u.a)({},e),{},{selectedLines:[]});case _:return Object(u.a)(Object(u.a)({},e),{},{selectedLines:[].concat(Object(b.a)(e.selectedLines),[t.payload]).flat(1)});case w:return Object(u.a)(Object(u.a)({},e),{},{selectedStations:[].concat(Object(b.a)(e.selectedStations),[t.payload]).flat(1)});default:return e}},connection:Y,path:Q}),ee=Object(r.b)($),te=(n(150),n(56)),ne=n(40),ie=(n(151),n(2)),ae=function(e){var t=e.name,n=e.url,i=e.id,a=Object(o.c)((function(e){return e.mobileAnimation}));return Object(ie.jsx)("li",{className:a.mobileAnimation?"menu-element active-menu":"menu-element hidden-menu",id:"menu-element-"+i,children:Object(ie.jsx)(ne.b,{className:"menu-link",to:n,children:t})})},se=(n(155),[{name:"Strona G\u0142\xf3wna",url:"/"},{name:"Przystanki",url:"/przystanki"},{name:"Po\u0142\u0105czenia",url:"/linie"},{name:"Znajd\u017a Tras\u0119",url:"/znajdz-trase"}]),ce=function(){var e=Object(i.useState)(!1),t=Object(te.a)(e,2),n=t[0],a=t[1],s=Object(o.b)(),c=se.map((function(e,t){return Object(ie.jsx)(ae,{id:t,name:e.name,url:e.url},e.name)}));return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"mobile-menu",onClick:function(){n?(s({type:d,payload:{}}),a(!1)):(s({type:l,payload:{}}),a(!0))},children:Object(ie.jsxs)("svg",{width:"40",height:"36",children:[Object(ie.jsx)("rect",{y:"0",width:"40",height:"6",fill:"#a1a1a1",className:n?"upper-bar-active":"upper-or-down-bar-inactive"}),Object(ie.jsx)("rect",{y:"15",width:"40",height:"6",fill:"#a1a1a1",className:n?"middle-bar-active":"middle-bar-inactive"}),Object(ie.jsx)("rect",{y:"30",width:"40",height:"6",fill:"#a1a1a1",className:n?"down-bar-active":"upper-or-down-bar-inactive"})]})}),Object(ie.jsx)("header",{className:n?"big-z-index":"low-z-index",children:Object(ie.jsx)("nav",{children:Object(ie.jsx)("ul",{className:n?"main-menu big-z-index":"main-menu low-z-index",children:c})})})]})},oe=n(25),re=(n(156),n(14)),ue=n(15),le=n(28),de=n.n(le),he=n(29),je=n.n(he),fe=void 0,pe=!1,be=function(){pe?(document.getElementById("labels-container").classList.remove("show-legend"),document.getElementById("labels-container").classList.add("hide-legend"),pe=!1,me()):(document.getElementById("labels-container").classList.add("show-legend"),document.getElementById("labels-container").classList.remove("hide-legend"),pe=!0,me())},me=function(){pe?(je()(".legend i").addClass("unrotate-icon"),je()(".legend i").removeClass("rotate-icon")):(je()(".legend i").removeClass("unrotate-icon"),je()(".legend i").addClass("rotate-icon"))},ve=function(e){void 0===fe?Oe(e):void 0!==fe&&fe!==e?(ge(fe),Oe(e)):fe===e&&ge(e)},Oe=function(e){e.classList.remove("not-hover-line"),e.classList.add("hover-line"),ye();var t=e.children[1].innerHTML.split(":")[0];_e(t),fe=e},ge=function(e){e.classList.add("not-hover-line"),e.classList.remove("hover-line"),xe(),fe=void 0},ye=function(){we.polyLines.forEach((function(e){e.polyLine.remove()}))},xe=function(){we.polyLines.forEach((function(e){e.polyLine.addTo(we.getInstance().map)}))},_e=function(e){var t=we.polyLines.find((function(t){return t.lineName===e}));if(void 0===t)throw"didnt found polyline for a line: "+e;t.polyLine.addTo(we.getInstance().map)},we=function(){function e(){Object(re.a)(this,e),this.map=void 0}return Object(ue.a)(e,[{key:"removeMap",value:function(){e.instance.map.remove(),e.instance.map=void 0,e.isLayerAdded=!1}},{key:"addMap",value:function(){void 0===e.instance.map&&(e.instance.map=de.a.map("mapid").setView([50.265951,19.616134],12.1),de.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}).addTo(e.instance.map))}},{key:"addPointsToTheMap",value:function(t){t.forEach((function(t){de.a.marker([t.location.lat,t.location.lon]).addTo(e.instance.map).bindPopup(t.name)}))}},{key:"drawLineOfStations",value:function(t,n){var i=t.stations.map((function(e){return[e.location.lat,e.location.lon]})),a=de.a.polyline(i).addTo(e.instance.map);a.setStyle({color:n,weight:6}),e.polyLines.push({lineName:t.name,polyLine:a})}},{key:"createLegend",value:function(t,n){var i=de.a.control({position:"bottomleft"});i.onAdd=function(e){var i=de.a.DomUtil.create("div","info legend"),a=[];return t.forEach((function(e,t){a.push('\n                    <span class="legend-fragment">\n                        <div class="circle-legend" style="background-color: '.concat(n[t],'"></div><span>').concat(e.name,": ").concat(e.begin.name," - ").concat(e.end.name,"</span>\n                    </span>\n                "))})),i.innerHTML='<strong id="upper-label">Linie (Kliknij aby zobaczy\u0107)<i class="icon-down-open rotate-icon"></i></strong><div id="labels-container" class="hide-legend">'+a.join("<br>")+"</div>",i},i.addTo(e.instance.map),je()(".legend-fragment").toArray().forEach((function(e){e.addEventListener("click",(function(){return ve(e)}))})),document.getElementById("upper-label").addEventListener("click",be)}}],[{key:"getInstance",value:function(){var t=je()("#mapid"),n=t.width();return t.css("height",n+"px"),e.instance||(e.instance=new e),e.instance}}]),e}();we.instance=void 0,we.isLayerAdded=!1,we.polyLines=[];n(157);var ke,Se=["red","blue","green","orange","black"],Ne=function(){var e,t=Object(o.c)((function(e){return e.data.data}));return Object(i.useEffect)((function(){return(e=we.getInstance()).addMap(),t.stations.length>0&&e.addPointsToTheMap(t.stations),t.lines.length>0&&(t.lines.forEach((function(t,n){e.drawLineOfStations(t,Se[n])})),e.createLegend(t.lines,Se)),function(){e.removeMap()}}),[t]),Object(ie.jsx)("div",{id:"mapid"})},Te=function(){return Object(ie.jsxs)("main",{"data-testid":"main-page",className:"main-page",children:[Object(ie.jsxs)("section",{children:[Object(ie.jsxs)("h1",{className:"main-page-title",children:["Witaj na stronie ",Object(ie.jsx)("i",{className:"icon-train"}),"Sienicznia\u0144skich lini Kolejowych!"]}),Object(ie.jsx)("p",{children:"Serwis ten umo\u017cliwia sprawdzenie wszystkich dost\u0119pnych tras oraz stacji kolejowych, jak r\xf3wnie\u017c wyszukiwania tras pomi\u0119dzy przystankami"})]}),Object(ie.jsx)(Ne,{}),Object(ie.jsxs)("footer",{children:["Zapraszamy!",Object(ie.jsxs)("div",{children:[Object(ie.jsx)("hr",{}),Object(ie.jsx)("p",{children:"\xa9 2021 Sienicznia\u0144skie Linie Kolejowe"})]})]})]})},De=n(45),Ae=(n(158),function(){var e=Object(o.c)((function(e){return e.data.data.stations})),t=Object(o.b)(),n=e.map((function(e){return{label:e.name,value:e.id.toString()}}));return Object(ie.jsx)("div",{className:"filter-stations-by-name",children:Object(ie.jsx)(De.a,{options:n,placeholder:"Wybierz nazw\u0119 stacji...",onChange:function(n){if(null!==n){var i=e.find((function(e){return e.name===n.label}));if(void 0===i)throw"cannot find station with name:"+n.value;t(S()),t({type:m,payload:i})}}})})}),Ee=(n(170),n(90)),Me=Object(Ee.a)(),Le=function(){var e=Object(o.c)((function(e){return e.data.data.lines})),t=Object(o.b)(),n=e.map((function(e){return{label:"".concat(e.name,": ").concat(e.begin.name," - ").concat(e.end.name),value:e.name}}));return Object(ie.jsx)("div",{className:"filter-stations-by-line",children:Object(ie.jsx)(De.a,{placeholder:"Wybierz linie, na trasie kt\xf3rych jest przystanek...",onChange:function(n){var i=e.filter((function(e){return n.find((function(t){return t.value===e.name}))}));t(k()),t(function(e){return{type:_,payload:e}}(i))},components:Me,isMulti:!0,options:n})})},ze=(n(171),function(){return Object(ie.jsxs)("div",{className:"station-filters",children:[Object(ie.jsx)(Ae,{}),Object(ie.jsx)(Le,{})]})}),Ie=(n(172),n(173),function(){function e(){Object(re.a)(this,e)}return Object(ue.a)(e,null,[{key:"filter",value:function(e,t,n){return e.filter((function(e){var i=!1;1===t.length?t[0].id===e.id&&(i=!0):i=!0;var a=!0;return n.forEach((function(t){void 0===t.stations.find((function(t){return t.id===e.id}))&&(a=!1)})),0===n.length&&(a=!0),!(!i||!a)}))}}]),e}()),Ce=(n(174),function(e){var t=Object(oe.f)();return Object(ie.jsxs)("div",{className:"station-component",onClick:function(){t.push("/przystanki/"+e.station.id)},children:[Object(ie.jsx)("i",{className:"icon-home"}),Object(ie.jsx)("span",{children:e.station.name})]})}),Re=function(){var e=Object(o.c)((function(e){return e.data.data.stations})),t=Object(o.c)((function(e){return e.selectedData.selectedStations})),n=Object(o.c)((function(e){return e.selectedData.selectedLines})),i=Ie.filter(e,t,n);i.sort((function(e,t){return e.name>t.name?1:-1}));var a=i.map((function(e){return Object(ie.jsx)(Ce,{station:e},e.name)}));return Object(ie.jsx)("div",{className:"stations-choosing",children:Object(ie.jsxs)("section",{children:[Object(ie.jsx)("h2",{children:"Znalezione stacje:"}),Object(ie.jsx)("div",{className:"stations-container",children:a})]})})},qe=function(){var e=Object(o.b)();return Object(i.useEffect)((function(){return function(){e(k()),e(S())}})),Object(ie.jsxs)("div",{"data-testid":"train-station-wrapper",className:"train-station-wrapper",children:[Object(ie.jsx)(ze,{}),Object(ie.jsx)(Re,{})]})},Ye=(n(175),n(176),function(){var e=Object(o.c)((function(e){return e.data.data.lines})),t=Object(o.b)(),n=e.map((function(e){return{label:e.name,value:e.name}}));return Object(ie.jsx)("div",{className:"filter-lines-by-name",children:Object(ie.jsx)(De.a,{options:n,placeholder:"Wybierz nazw\u0119 linii...",onChange:function(n){if(null!==n){var i=e.find((function(e){return e.name===n.label}));if(void 0===i)throw"cannot find station with name:"+n.value;t(k()),t({type:O,payload:i})}}})})}),Pe=(n(177),Object(Ee.a)()),Ue=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.data.data.stations})),n=t.map((function(e){return{label:e.name,value:e.id}}));return Object(ie.jsx)("div",{className:"filter-lines-by-stations",children:Object(ie.jsx)(De.a,{placeholder:"Wybierz stacje, przez kt\xf3re przechodzi\u0107 ma linia...",onChange:function(n){var i=t.filter((function(e){return n.find((function(t){return t.value===e.id}))}));e(S()),e(function(e){return{type:w,payload:e}}(i))},components:Pe,isMulti:!0,options:n})})},He=(n(178),function(){return Object(ie.jsxs)("div",{className:"lines-choosing",children:[Object(ie.jsx)(Ye,{}),Object(ie.jsx)(Ue,{})]})}),Be=(n(179),function(){function e(){Object(re.a)(this,e)}return Object(ue.a)(e,null,[{key:"filter",value:function(e,t,n){return e.filter((function(e){var i=!1;1===n.length?n[0].name===e.name&&(i=!0):i=!0;var a=!0;return t.forEach((function(t){void 0===e.stations.find((function(e){return e.id===t.id}))&&(a=!1)})),0===t.length&&(a=!0),!(!i||!a)}))}}]),e}()),Fe=(n(180),function(e){var t=Object(oe.f)();return Object(ie.jsxs)("div",{className:"line-component",onClick:function(){t.push("/linie/"+e.line.name)},children:[Object(ie.jsx)("i",{className:"icon-train"}),Object(ie.jsx)("span",{children:e.line.name})]})}),We=function(){var e=Object(o.c)((function(e){return e.data.data.lines})),t=Object(o.c)((function(e){return e.selectedData.selectedStations})),n=Object(o.c)((function(e){return e.selectedData.selectedLines})),i=Be.filter(e,t,n);i.sort((function(e,t){return e.name>t.name?1:-1}));var a=i.map((function(e){return Object(ie.jsx)(Fe,{line:e},e.name)}));return Object(ie.jsx)("div",{className:"lines-wrapper",children:Object(ie.jsxs)("section",{children:[Object(ie.jsx)("h2",{children:"Znalezione linie:"}),Object(ie.jsx)("div",{className:"lines-inner-container",children:a})]})})},Ve=function(){var e=Object(o.b)();return Object(i.useEffect)((function(){return function(){e(k()),e(S())}})),Object(ie.jsxs)("div",{"data-testid":"train-choosing-wrapper",className:"train-choosing-wrapper",children:[Object(ie.jsx)(He,{}),Object(ie.jsx)(We,{})]})},Ke=(n(181),n(182),function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.data.data.stations})),i=Object(o.c)((function(t){return t.connection[e.propName]})),a=n.map((function(e){return{value:e.id.toString(),label:e.name}})),s=null===i?null:{label:i.name,value:i.id.toString()};return Object(ie.jsx)("div",{className:"station-for-connection-choosing",children:Object(ie.jsx)(De.a,{options:a,placeholder:e.placeholder,onChange:function(i){if(null!==i){var a=n.find((function(e){return e.id.toString()===i.value}));if(void 0===a)throw"Cannot find station with id: "+i.value+" and name: "+i.label;t(e.removeAction()),t(e.addAction(a))}},value:s})})}),Ze=(n(183),n(27)),Ge=n(241),Xe=n(251),Je=n(105),Qe=n(248),$e=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.connection.beginStation})),n=Object(o.c)((function(e){return e.connection.endStation})),a=Object(o.c)((function(e){return e.connection.departureTime}));Object(i.useEffect)((function(){return null===a&&e(R(new Date)),function(){e(z()),e(q()),e(C())}}),[]);var s=function(t){null!==t&&(e(q()),e(R(t)),e(K()),e(G()),e(J()))};return Object(ie.jsxs)("div",{className:"connections-data-choosing",children:[Object(ie.jsx)(Ke,{removeAction:z,addAction:L,placeholder:"Wybierz stacj\u0119 pocz\u0105tkow\u0105...",propName:"beginStation"}),Object(ie.jsx)("div",{className:"exchange-div",onClick:function(){e(z()),e(C()),e(L(n)),e(I(t)),e(K()),e(G()),e(J())},children:Object(ie.jsx)("i",{className:"icon-exchange"})}),Object(ie.jsx)(Ke,{removeAction:C,addAction:I,placeholder:"Wybierz stacj\u0119 ko\u0144cow\u0105...",propName:"endStation"}),Object(ie.jsxs)("div",{className:"departure-time-pickers",children:[Object(ie.jsx)("div",{children:Object(ie.jsx)(Ze.a,{utils:Je.a,locale:Qe.a,children:Object(ie.jsx)(Ge.a,{value:a,label:"Wybierz dzie\u0144",onChange:s})})}),Object(ie.jsx)("div",{children:Object(ie.jsx)(Ze.a,{utils:Je.a,locale:Qe.a,children:Object(ie.jsx)(Xe.a,{value:a,label:"Wybierz godzin\u0119",ampm:!1,onChange:s})})})]})]})};!function(e){e[e.MONDAY=0]="MONDAY",e[e.TUESDAY=1]="TUESDAY",e[e.WEDNESDAY=2]="WEDNESDAY",e[e.THURSDAY=3]="THURSDAY",e[e.FRIDAY=4]="FRIDAY",e[e.SATURDAY=5]="SATURDAY",e[e.SUNDAY=6]="SUNDAY"}(ke||(ke={}));var et=ke,tt=function(){function e(t,n,i,a){Object(re.a)(this,e),this._seconds=void 0,this._weekDay=void 0,this._hours=void 0,this._minutes=void 0,this._weekDay=t,this._hours=n,this._minutes=i,this._seconds=a}return Object(ue.a)(e,[{key:"seconds",get:function(){return this._seconds}},{key:"weekDay",get:function(){return this._weekDay}},{key:"hours",get:function(){return this._hours}},{key:"minutes",get:function(){return this._minutes}},{key:"hoursString",value:function(){return this._hours<10?"0"+this._hours:this._hours.toString()}},{key:"minutesString",value:function(){return this._minutes<10?"0"+this._minutes:this._minutes.toString()}},{key:"secondsString",value:function(){return this._seconds<10?"0"+this._seconds:this._seconds.toString()}},{key:"convertToSeconds",value:function(){return(new nt).convertToSeconds(this)}},{key:"addTime",value:function(e){var t=new nt,n=t.convert(t.convertToSeconds(this)+e);this._hours=n.hours,this._seconds=n.seconds,this._weekDay=n.weekDay,this._minutes=n.minutes}}]),e}(),nt=function(){function e(){Object(re.a)(this,e)}return Object(ue.a)(e,[{key:"convert",value:function(e){var t;switch(e%=604800,Math.trunc(e/86400)){default:t=et.MONDAY;break;case 1:t=et.TUESDAY;break;case 2:t=et.WEDNESDAY;break;case 3:t=et.THURSDAY;break;case 4:t=et.FRIDAY;break;case 5:t=et.SATURDAY;break;case 6:t=et.SUNDAY}var n=Math.trunc(e%86400/3600),i=Math.trunc(e%86400%3600/60),a=Math.trunc(e%86400%3600%60);return new tt(t,n,i,a)}},{key:"convertFromDate",value:function(e){var t=e.getSeconds(),n=e.getMinutes(),i=e.getHours(),a=e.getDay()-1===-1?6:e.getDay()-1;return new tt(a,i,n,t)}},{key:"addToTheDate",value:function(e,t){var n=this.convertFromDate(e).convertToSeconds();console.log(n),console.log(t.convertToSeconds());var i=t.convertToSeconds()-n;return i<0&&(i*=-1),new Date(e.getTime()+1e3*i)}},{key:"convertToSeconds",value:function(e){if(void 0===e)return 1/0;switch(e.weekDay){case et.MONDAY:return 0+3600*e.hours+60*e.minutes+e.seconds;case et.TUESDAY:return 86400+3600*e.hours+60*e.minutes+e.seconds;case et.WEDNESDAY:return 172800+3600*e.hours+60*e.minutes+e.seconds;case et.THURSDAY:return 259200+3600*e.hours+60*e.minutes+e.seconds;case et.FRIDAY:return 345600+3600*e.hours+60*e.minutes+e.seconds;case et.SATURDAY:return 432e3+3600*e.hours+60*e.minutes+e.seconds;case et.SUNDAY:return 518400+3600*e.hours+60*e.minutes+e.seconds;default:return-1}}},{key:"getPolishNameOfTheWeekDay",value:function(e){switch(e){case et.MONDAY:return"Poniedzia\u0142ek";case et.TUESDAY:return"Wtorek";case et.WEDNESDAY:return"\u015aroda";case et.THURSDAY:return"Czwartek";case et.FRIDAY:return"Pi\u0105tek";case et.SATURDAY:return"Sobota";case et.SUNDAY:return"Niedziela"}}}]),e}(),it=n(129),at=n(128),st=function(e){Object(it.a)(n,e);var t=Object(at.a)(n);function n(e,i,a,s){var c;return Object(re.a)(this,n),(c=t.call(this,a,e))._line=void 0,c._weekDate=void 0,c._previous_node=void 0,c._reversed=void 0,c._line=i,c._reversed=s,c}return Object(ue.a)(n,[{key:"toString",value:function(){var e=void 0!==this._line?this._line.name:"currentLine";return this.station.name+e+this.reversed}},{key:"getTime",value:function(){return void 0===this.weekDate?1/0:this.weekDate.convertToSeconds()}},{key:"previous_node",get:function(){return this._previous_node},set:function(e){this._previous_node=e}},{key:"weekDate",get:function(){return this._weekDate},set:function(e){this._weekDate=e}},{key:"reversed",get:function(){return this._reversed}},{key:"line",get:function(){if(void 0===this._line)throw"line is undefined";return this._line},set:function(e){this._line=e}},{key:"addNeighbour",value:function(e){this._neighbours.push(e)}}]),n}(function(){function e(t,n){Object(re.a)(this,e),this._visited=void 0,this._neighbours=[],this._station=void 0,this._visited=t,this._station=n}return Object(ue.a)(e,[{key:"station",get:function(){return this._station},set:function(e){this._station=e}},{key:"visited",get:function(){return this._visited},set:function(e){this._visited=e}},{key:"neighbours",get:function(){return this._neighbours},set:function(e){this._neighbours=e}}]),e}()),ct=function(){function e(t,n){Object(re.a)(this,e),this._cost=void 0,this._destination=void 0,this._source=void 0,this._destination=t,this._source=n}return Object(ue.a)(e,[{key:"cost",get:function(){return this._cost},set:function(e){this._cost=e}},{key:"destination",get:function(){return this._destination}},{key:"source",get:function(){return this._source}}]),e}(),ot=function(){function e(){Object(re.a)(this,e)}return Object(ue.a)(e,null,[{key:"computeDistance",value:function(e,t){return Math.trunc(6371e3*Math.acos(Math.sin(this.degreesToRadians(e.lat))*Math.sin(this.degreesToRadians(t.lat))+Math.cos(this.degreesToRadians(e.lat))*Math.cos(this.degreesToRadians(t.lat))*Math.cos(this.degreesToRadians(e.lon-t.lon))))}},{key:"degreesToRadians",value:function(e){return e*(Math.PI/180)}}]),e}(),rt=function(){function e(){Object(re.a)(this,e)}return Object(ue.a)(e,null,[{key:"getTimeOfTheNextTrain",value:function(t,n,i,a,s){var c=new nt,o=i.stations.indexOf(n),r=a?i.stations.concat(i.stations.slice(o,i.stations.length-1).reverse()):i.stations.slice(0,o+1),u=i.time.map((function(t){return c.convertToSeconds(t)+e.computeTimeBetweenStationsChain(r,s)}));u.sort((function(e,t){return e-t}));var l=c.convertToSeconds(t),d=u.find((function(e){return e>l}));return void 0===d?u[0]:d%604800}},{key:"computeTime",value:function(e,t,n){return Math.trunc(ot.computeDistance(e,t)/this.kmhToMs(n))}},{key:"computeTimeBetweenStationsChain",value:function(e,t){for(var n=0,i=0;i<e.length-1;i++)n+=this.computeTime(e[i].location,e[i+1].location,t)+30;return n}},{key:"kmhToMs",value:function(e){return e/3.6}}]),e}(),ut=function(){function e(t){Object(re.a)(this,e),this._comparator=void 0,this._queue=[],this.heapMap={},this._comparator=t}return Object(ue.a)(e,[{key:"indexOf",value:function(e){return this.heapMap[e.toString()]}},{key:"size",value:function(){return this._queue.length}},{key:"getQueueCopy",value:function(){var e=[];return this._queue.forEach((function(t){e.push(t)})),e}},{key:"isHeap",value:function(e){return!!this.isLeaf(e)||!this._comparator(this._queue[this.left(e)],this._queue[e])&&(!this._comparator(this._queue[this.right(e)],this._queue[e])&&(this.isHeap(this.right(e))&&this.isHeap(this.left(e))))}},{key:"left",value:function(e){return 2*e+1}},{key:"right",value:function(e){return 2*e+2}},{key:"parent",value:function(e){return Math.trunc((e-1)/2)}},{key:"hasLeft",value:function(e){return 2*e+1<this._queue.length}},{key:"hasRight",value:function(e){return 2*e+2<this._queue.length}},{key:"isLeaf",value:function(e){return 2*e+2>this._queue.length}},{key:"heapCondition",value:function(e){var t=e;return this.hasLeft(e)&&this._comparator(this._queue[this.left(e)],this._queue[t])&&(t=this.left(e)),this.hasRight(e)&&this._comparator(this._queue[this.right(e)],this._queue[t])&&(t=this.right(e)),t}},{key:"push",value:function(e){this._queue.push(e),this.heapMap[e.toString()]=this._queue.length-1,this.repairHeap(this._queue.length-1)}},{key:"repairHeap",value:function(e){for(var t=this.heapCondition(e);!this.isLeaf(e)&&t!==e;){var n=[this._queue[e],this._queue[t]];this._queue[t]=n[0],this._queue[e]=n[1],this.heapMap[this._queue[t].toString()]=e,this.heapMap[this._queue[e].toString()]=t,e=t,t=this.heapCondition(e)}for(;e>0&&e<this._queue.length&&this._comparator(this._queue[e],this._queue[this.parent(e)]);){var i=[this._queue[e],this._queue[this.parent(e)]];this._queue[this.parent(e)]=i[0],this._queue[e]=i[1],this.heapMap[this._queue[this.parent(e)].toString()]=e,this.heapMap[this._queue[e].toString()]=this.parent(e),e=this.parent(e)}}},{key:"pop",value:function(){if(0===this.size())throw"the queue is empty";var e=this._queue[0];return this._queue[0]=this._queue[this.size()-1],this.heapMap[this._queue[0].toString()]=0,delete this.heapMap[this._queue.length-1],this._queue.pop(),this.repairHeap(0),e}}]),e}(),lt=function(){function e(t,n,i){Object(re.a)(this,e),this._lines=void 0,this._time=void 0,this.beginStation=void 0,this.destinationStation=void 0,this._nodes=[],this.speed=void 0,this._lines=t,this._time=n,this.speed=i,this.createNodes()}return Object(ue.a)(e,[{key:"lines",get:function(){return this._lines}},{key:"time",get:function(){return this._time}},{key:"nodes",get:function(){return this._nodes}},{key:"createNodes",value:function(){for(var e=this.lines.map((function(e){return e.stations.map((function(t){return[new st(t,e,!1,!1),new st(t,e,!1,!0)]})).flat(1)})).flat(1).sort((function(e,t){return e.station.id-t.station.id})),t=[],n=0;n<=e.length;n++)n>0&&(n===e.length||e[n].station.id!==e[n-1].station.id)&&(t.forEach((function(e,n){t.forEach((function(t,i){if(i>n){var a=new ct(e,t),s=new ct(t,e);t.addNeighbour(a),e.addNeighbour(s)}}))})),t=[]),t.push(e[n]);e.sort((function(e,t){return e.station.stationNumber(e.line)-t.station.stationNumber(t.line)})).sort((function(e,t){return e.line.name>t.line.name?1:t.line.name>e.line.name?-1:0}));for(var i=0;i<e.length;i+=2)if(i<e.length-2&&e[i].line.name===e[i+2].line.name){var a=new ct(e[i+2],e[i]);e[i].addNeighbour(a)}for(var s=e.length-1;s>=2;s-=2)if(e[s].line.name===e[s-2].line.name){var c=new ct(e[s-2],e[s]);e[s].addNeighbour(c)}this._nodes=e}},{key:"setDestinationAndBeginning",value:function(e,t){this.beginStation=e,this.destinationStation=t}},{key:"loadBeginNeighbours",value:function(e){var t=this._nodes.filter((function(t){return t.station.name===e.station.name}));e.neighbours=t.map((function(t){return new ct(t,e)}))}},{key:"computeBestTime",value:function(){var e=this;void 0!==this.destinationStation&&void 0!==this.beginStation&&function(){var t=new nt;e._nodes.forEach((function(e){e.previous_node=void 0,e.weekDate=void 0,e.visited=!1}));var n=new st(e.beginStation,void 0,!1,!1);n.weekDate=e._time,e.loadBeginNeighbours(n);var i=new ut((function(e,t){return e.getTime()<t.getTime()}));i.push(n),e._nodes.forEach((function(e){i.push(e)}));for(var a=function(){var n=i.pop();n.neighbours.forEach((function(a){var s=a.destination;if(!s.visited){var c=s.getTime(),o=rt.getTimeOfTheNextTrain(t.convert(n.getTime()),s.station,s.line,s.reversed,e.speed);c>o&&(s.weekDate=t.convert(o),s.previous_node=n,i.repairHeap(i.indexOf(s)))}})),n.visited=!0};i.size()>0;)a()}()}},{key:"getFastestPath",value:function(){var e=this,t=this._nodes.filter((function(t){var n;return t.station.name===(null===(n=e.destinationStation)||void 0===n?void 0:n.name)&&void 0!==t.weekDate}));t.sort((function(e,t){return e.getTime()-t.getTime()}));var n=t[0],i=[];for(i.push(n);n.station!==this.beginStation;)void 0!==n.previous_node&&(n=n.previous_node),i.push(n);return i}}]),e}(),dt=(n(184),function(e){var t=new nt,n=t.convert(e.path[0].time),i=t.convert(e.path[e.path.length-1].time),a=[];e.path.forEach((function(t,n){n>0&&t.line.name!==e.path[n-1].line.name&&a.push(Object(ie.jsx)(Fe,{line:e.path[n-1].line},e.path[n-1].line.name+"connection"+Math.random().toString()))})),a.push(Object(ie.jsx)(Fe,{line:e.path[e.path.length-1].line}));var s=Object(oe.f)();return Object(ie.jsxs)("div",{className:"connection",onClick:function(){var t="/connection/";e.path.forEach((function(n,i){t+="".concat(n.line.name,"-").concat(n.station.id,"-").concat(n.time,"-").concat(n.reverse),i!==e.path.length-1&&(t+="-")})),s.push(t)},children:[Object(ie.jsx)("div",{className:"departure-time-div",children:n.hoursString()+":"+n.minutesString()}),Object(ie.jsx)("i",{className:"icon-right-thin"}),Object(ie.jsx)("div",{className:"arrive-time-div",children:i.hoursString()+":"+i.minutesString()}),Object(ie.jsx)("div",{children:a})]})}),ht=(n(185),function(){var e=Object(o.c)((function(e){return e.connection.beginStation})),t=Object(o.c)((function(e){return e.connection.endStation})),n=Object(o.c)((function(e){return e.connection.departureTime})),a=Object(o.c)((function(e){return e.data.data.lines})),s=Object(o.c)((function(e){return e.data.data.speed})),c=Object(o.c)((function(e){return e.path.paths})),r=Object(o.c)((function(e){return e.path.maxPaths})),u=Object(o.c)((function(e){return e.path.nextConnectionTime})),l=Object(o.b)(),d=new nt;Object(i.useEffect)((function(){return je()(window).scroll((function(){je()(window).scrollTop()+je()(window).height()==je()(document).height()&&(l(Z(3)),h())})),function(){l(K()),l(G()),l(J()),je()(window).off("scroll")}}),[]);var h=function(){if(null!==n&&null===u&&l(X(d.convertFromDate(n))),null!==u&&null!==e&&null!==t&&c.length<r)for(var i=0;i<3;i++){var o=new lt(a,u,s);o.setDestinationAndBeginning(e,t),o.computeBestTime();var h={path:o.getFastestPath().reverse().map((function(e){return{station:e.station,line:e.line,time:e.getTime(),reverse:e.reversed}}))};l(V(Object(ie.jsx)(dt,{path:h.path},i+"path"+Math.random()))),u=d.convert(h.path[0].time),l(X(d.convert(h.path[0].time)))}};h();var j=c.length<3?"":Object(ie.jsx)("div",{className:"load-more-button-wrapper",children:Object(ie.jsx)("button",{className:"load-more-button",onClick:function(){l(Z(3)),h()},children:"Za\u0142aduj wi\u0119cej"})});return Object(ie.jsxs)("div",{children:[c,j]})}),jt=function(){return Object(ie.jsxs)("div",{"data-testid":"connection-choosing-wrapper",className:"connection-choosing-wrapper",children:[Object(ie.jsx)($e,{}),Object(ie.jsx)(ht,{})]})},ft=n(96),pt=n.n(ft),bt=function(){function e(t,n,i){Object(re.a)(this,e),this._name=void 0,this._id=void 0,this._location=void 0,this._name=n,this._location=i,this._id=t}return Object(ue.a)(e,[{key:"stationNumber",value:function(e){return e.stations.indexOf(this)}},{key:"id",get:function(){return this._id}},{key:"location",get:function(){return this._location}},{key:"name",get:function(){return this._name}}]),e}(),mt=function(){function e(t,n,i,a,s){Object(re.a)(this,e),this._name=void 0,this._stations=void 0,this._begin=void 0,this._end=void 0,this._time=void 0,this._name=t,this._stations=n,this._begin=i,this._end=a,this._time=s}return Object(ue.a)(e,[{key:"name",get:function(){return this._name}},{key:"stations",get:function(){return this._stations}},{key:"begin",get:function(){return this._begin}},{key:"end",get:function(){return this._end}},{key:"time",get:function(){return this._time}}]),e}(),vt=function(){function e(){Object(re.a)(this,e),this._stations=[],this._lines=[]}return Object(ue.a)(e,[{key:"stations",get:function(){return this._stations}},{key:"lines",get:function(){return this._lines}},{key:"fetchData",value:function(){return pt.a.all([pt.a.get("/Railways-connections/jsons/stations.json"),pt.a.get("/Railways-connections/jsons/lines.json")]).then((function(t){var n=t[0].data.stations,i=t[1].data,a=i.lines,s=i.speed;return e.instance._stations=n.map((function(e){return new bt(e.id,e.name,e.location)})),e.instance._lines=a.map((function(t){return e.createLineObject(t)})),{stations:e.instance.stations,lines:e.instance.lines,speed:s}})).catch((function(){return console.error("error with Internet Connection!"),{stations:[],lines:[],speed:null}}))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"createLineObject",value:function(t){var n=new nt,i=t.stations.map((function(t){var n=e.instance._stations.find((function(e){return e.id===t}));if(void 0!==n)return n;throw"cannot find station with ID "+t})),a=e.instance._stations.find((function(e){return e.id===t.begin})),s=e.instance._stations.find((function(e){return e.id===t.end})),c=t.time.map((function(e){return n.convert(e)}));if(void 0===a)throw"Line ".concat(t.name," has wrong begin station id");if(void 0===s)throw"Line ".concat(t.name," has wrong end station id");return new mt(t.name,i,a,s,c)}}]),e}();vt.instance=void 0;var Ot=function(){var e=Object(o.b)();return Object(i.useEffect)((function(){vt.getInstance().fetchData().then((function(t){var n=t.stations,i=t.lines,a=t.speed;e(function(e){var t=e.stations,n=e.lines,i=e.speed;return{type:f,payload:{stations:t,lines:n,speed:i}}}({stations:n,lines:i,speed:a}))}))}),[]),Object(ie.jsxs)(oe.c,{children:[Object(ie.jsx)(oe.a,{exact:!0,path:"/",component:Te}),Object(ie.jsx)(oe.a,{exact:!0,path:"/przystanki",component:qe}),Object(ie.jsx)(oe.a,{exact:!0,path:"/linie",component:Ve}),Object(ie.jsx)(oe.a,{exact:!0,path:"/znajdz-trase",component:jt})]})},gt=(n(204),function(){function e(){Object(re.a)(this,e),this.map=void 0}return Object(ue.a)(e,[{key:"removeMap",value:function(){e.instance.map.remove(),e.instance.map=void 0,e.isLayerAdded=!1}},{key:"addStationToTheMap",value:function(){var t=e._station,n=t.location,i=t.name;de.a.marker([n.lat,n.lon]).addTo(e.instance.map).bindPopup(i)}},{key:"addMap",value:function(){if(void 0===e.instance.map){var t=e._station.location;e.instance.map=de.a.map("station-details-map").setView([t.lat,t.lon],13.1),de.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}).addTo(e.instance.map)}}}],[{key:"station",set:function(e){this._station=e}},{key:"getInstance",value:function(t){var n=je()("#station-details-map"),i=n.width();return n.css("height",i+"px"),e.instance||(e.instance=new e),e.station=t,e.instance}}]),e}());gt.instance=void 0,gt._station=void 0,gt.isLayerAdded=!1;var yt=function(e){return Object(i.useEffect)((function(){if(void 0!==e.station){var t=gt.getInstance(e.station);return t.addMap(),t.addStationToTheMap(),function(){t.removeMap()}}}),[]),Object(ie.jsx)("div",{id:"station-details-map"})},xt=(n(205),n(206),function(e){for(var t=Object(o.c)((function(e){return e.data.data.speed})),n=e.line.stations.indexOf(e.station),i=new nt,a=e.reversed?e.line.stations.concat(e.line.stations.slice(n,e.line.stations.length-1).reverse()):e.line.stations.slice(0,n+1),s=e.line.time.map((function(e){return i.convert(i.convertToSeconds(e)+rt.computeTimeBetweenStationsChain(a,t))})).reduce((function(e,t){return e[t.weekDay]=e[t.weekDay]||[],e[t.weekDay].push(t),e}),Object.create(null)),c=0,r=Object.entries(s);c<r.length;c++){var u=Object(te.a)(r[c],2),l=u[0],d=u[1];s[l]=d.sort((function(e,t){return e.seconds-t.seconds})).sort((function(e,t){return e.minutes-t.minutes})).sort((function(e,t){return e.hours-t.hours}))}var h=Object.entries(s).map((function(e){var t=Object(te.a)(e,2),n=t[0],a=t[1].map((function(e){return Object(ie.jsxs)("span",{className:"hours-for-station",children:[e.hoursString(),":",e.minutesString()]},e.hoursString()+":"+e.minutesString())})),s=i.getPolishNameOfTheWeekDay(parseInt(n));return Object(ie.jsxs)("div",{className:"day-hours-component",children:[Object(ie.jsx)("div",{children:s}),Object(ie.jsx)("div",{className:"hours-container",children:a})]},s+"day-component")}));return Object(ie.jsx)("div",{children:h})}),_t=function(e){var t=e.line.stations;e.reversed&&(t=t.slice().reverse());var n=t.map((function(t,n){var i=n!==e.line.stations.length-1?Object(ie.jsx)("i",{className:"icon-right-thin"}):null;return t.id===e.station.id?Object(ie.jsxs)("span",{children:[Object(ie.jsx)("strong",{className:"span-station-name current-station",children:t.name}),i]},t.name+e.reversed+"stlist"):Object(ie.jsxs)("span",{children:[Object(ie.jsx)("span",{className:"span-station-name",children:t.name}),i]},t.name+e.reversed+"stlist")}));return Object(ie.jsx)("div",{children:n})},wt=function(e){var t=Object(i.useState)(!1),n=Object(te.a)(t,2),a=n[0],s=n[1],c=Object(i.useState)(!1),o=Object(te.a)(c,2),r=o[0],u=o[1];return Object(ie.jsxs)("div",{className:"stations-details-line",children:[Object(ie.jsxs)("div",{className:"line-wrapper",children:[Object(ie.jsx)(Fe,{line:e.line}),Object(ie.jsx)("div",{children:Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("div",{className:"show-hours-icon",onClick:function(){return s((function(e){return!e}))},children:["Kierunek: ",Object(ie.jsx)("strong",{children:e.line.end.name}),Object(ie.jsx)("div",{className:a?"show-content icons-hours-wrapper":"hide-content icons-hours-wrapper",children:Object(ie.jsx)("i",{className:"icon-down-open"})})]}),Object(ie.jsxs)("div",{className:"hours-container",style:a?{height:"auto"}:{height:"0px"},children:[Object(ie.jsx)(_t,{station:e.station,line:e.line,reversed:!1}),Object(ie.jsx)(xt,{station:e.station,line:e.line,reversed:!1})]})]})}),Object(ie.jsx)("div",{children:Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("div",{className:"show-hours-icon",onClick:function(){return u((function(e){return!e}))},children:["Kierunek: ",Object(ie.jsx)("strong",{children:e.line.begin.name}),Object(ie.jsx)("div",{className:r?"show-content icons-hours-wrapper":"hide-content icons-hours-wrapper",children:Object(ie.jsx)("i",{className:"icon-down-open"})})]}),Object(ie.jsxs)("div",{className:"hours-container",style:r?{height:"auto"}:{height:"0px"},children:[Object(ie.jsx)(_t,{station:e.station,line:e.line,reversed:!0}),Object(ie.jsx)(xt,{station:e.station,line:e.line,reversed:!0})]})]})})]}),Object(ie.jsx)("hr",{})]})},kt=function(e){var t=Object(o.c)((function(e){return e.data.data.lines}));if(void 0!==e.station){var n=t.filter((function(t){return void 0!==t.stations.find((function(t){return t.id===e.station.id}))})).map((function(t){return Object(ie.jsx)(wt,{line:t,station:e.station},t.name+" "+e.station.id)}));return Object(ie.jsx)("div",{children:n})}return Object(ie.jsx)("div",{})},St=function(e){return Object(ie.jsx)("section",{children:Object(ie.jsxs)("h2",{children:["B\u0142\u0105d 404 ",Object(ie.jsx)("br",{}),"Nie znaleziono stacji o id r\xf3wnym ",e.id]})})},Nt=function(){var e=Object(oe.g)().id,t=Object(o.c)((function(e){return e.data.data.stations})).find((function(t){return t.id===parseInt(e,10)}));return void 0===t?Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"station-details",children:Object(ie.jsx)("div",{className:"station-details-content",children:Object(ie.jsx)(St,{id:e})})})}):Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"station-details",children:Object(ie.jsx)("div",{className:"station-details-content",children:Object(ie.jsxs)("section",{children:[Object(ie.jsxs)("h2",{children:["Szczeg\xf3\u0142y na temat wybranej stacji: ",t.name]}),Object(ie.jsx)(yt,{station:t}),Object(ie.jsxs)("div",{className:"station-lines-container",children:[Object(ie.jsx)("h2",{children:"Odjazdy poci\u0105g\xf3w"}),Object(ie.jsx)(kt,{station:t})]})]})})})})},Tt=(n(207),function(){function e(){Object(re.a)(this,e),this.map=void 0}return Object(ue.a)(e,[{key:"removeMap",value:function(){e.instance.map.remove(),e.instance.map=void 0,e.isLayerAdded=!1}},{key:"addMap",value:function(){void 0===e.instance.map&&(e.instance.map=de.a.map("line-details-map").setView([50.265951,19.616134],12.1),de.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}).addTo(e.instance.map))}},{key:"addPointsToTheMap",value:function(){e._line.stations.forEach((function(t){de.a.marker([t.location.lat,t.location.lon]).addTo(e.instance.map).bindPopup(t.name)}))}},{key:"drawLine",value:function(){var t=e._line.stations.map((function(e){return[e.location.lat,e.location.lon]}));de.a.polyline(t).addTo(e.instance.map).setStyle({color:"blue",weight:6})}}],[{key:"line",set:function(e){this._line=e}},{key:"getInstance",value:function(t){var n=je()("#line-details-map"),i=n.width();return n.css("height",i+"px"),e.instance||(e.instance=new e),e.line=t,e.instance}}]),e}());Tt.instance=void 0,Tt._line=void 0,Tt.isLayerAdded=!1;var Dt=function(e){return Object(i.useEffect)((function(){if(void 0!==e.line){var t=Tt.getInstance(e.line);return t.addMap(),t.drawLine(),t.addPointsToTheMap(),function(){t.removeMap()}}}),[]),Object(ie.jsx)("div",{id:"line-details-map"})},At=(n(208),function(e){var t=e.line.stations.map((function(t,n){e.line.stations.length;return Object(ie.jsx)(Ce,{station:t})}));return Object(ie.jsx)("div",{className:"stations-of-lines",children:t})}),Et=function(e){return Object(ie.jsx)("section",{children:Object(ie.jsxs)("h2",{children:["B\u0142\u0105d 404 ",Object(ie.jsx)("br",{}),"Nie znaleziono linii o nazwie ",e.name]})})},Mt=function(){var e=Object(oe.g)().name;e=e.toUpperCase();var t=Object(o.c)((function(e){return e.data.data.lines})).find((function(t){return t.name===e}));return void 0===t?Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"line-details",children:Object(ie.jsx)("div",{className:"line-details-content",children:Object(ie.jsx)(Et,{name:e})})})}):Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"line-details",children:Object(ie.jsxs)("div",{className:"line-details-content",children:[Object(ie.jsxs)("section",{children:[Object(ie.jsxs)("h2",{children:["Szczeg\xf3\u0142y na temat wybranej linii: ",t.name]}),Object(ie.jsx)(Dt,{line:t})]}),Object(ie.jsxs)("section",{className:"line-stations-container",children:[Object(ie.jsx)("h2",{children:"Przystanki (w kolejno\u015bci przejazdu):"}),Object(ie.jsx)(At,{line:t}),Object(ie.jsx)("hr",{}),Object(ie.jsx)("h2",{children:"Godziny odjazd\xf3w:"}),Object(ie.jsxs)("h3",{children:[Object(ie.jsx)("i",{className:"icon-train"}),"Kierunek: ",t.end.name," "]}),Object(ie.jsxs)("h3",{children:["Stacja pocz\u0105tkowa: ",t.begin.name]}),Object(ie.jsx)(xt,{station:t.stations[0],line:t,reversed:!1}),Object(ie.jsxs)("h3",{children:[Object(ie.jsx)("i",{className:"icon-train"}),"Kierunek: ",t.begin.name," "]}),Object(ie.jsxs)("h3",{children:["Stacja pocz\u0105tkowa: ",t.end.name]}),Object(ie.jsx)(xt,{station:t.stations[0],line:t,reversed:!0})]})]})})})},Lt=(n(209),n(210),n(211),function(e){return Object(ie.jsxs)("div",{className:"station-time",children:[Object(ie.jsx)(Ce,{station:e.station}),Object(ie.jsx)("p",{children:e.time.hoursString()+":"+e.time.minutesString()})]})}),zt=function(e){var t=new nt,n=e.path.map((function(e){return Object(ie.jsx)(Lt,{time:t.convert(e.time),station:e.station},e.station.name+"station-time"+Math.random())}));return Object(ie.jsxs)("div",{className:"one-line-connection",style:{backgroundColor:e.color},children:[Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("p",{children:["Kierunek: ",e.reverse?e.line.begin.name:e.line.end.name]}),Object(ie.jsx)(Fe,{line:e.line})]}),Object(ie.jsx)("div",{className:"one-line-connection-inner",children:n})]})},It=function(e){for(var t=[],n=e.colors,i=[],a=0,s=0;s<e.path.length;s++)i.push(e.path[s]),s!==e.path.length-1&&e.path[s].line.name===e.path[s+1].line.name||(t.push(Object(ie.jsx)(zt,{reverse:e.path[s].reverse,line:e.path[s].line,color:n[a++],path:i},e.path[s].line+Math.random())),i=[]);return Object(ie.jsx)("div",{children:t})},Ct=(n(212),function(){function e(){Object(re.a)(this,e),this.map=void 0}return Object(ue.a)(e,[{key:"removeMap",value:function(){e.instance.map.remove(),e.instance.map=void 0,e.isLayerAdded=!1}},{key:"addMap",value:function(){void 0===e.instance.map&&(e.instance.map=de.a.map("mapdiv-connection").setView([50.265951,19.616134],12.1),de.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}).addTo(e.instance.map))}},{key:"addConnections",value:function(t,n){var i=this,a=new nt,s=0;t.path.forEach((function(c,o){var r=a.convert(c.time),u=r.hoursString()+":"+r.minutesString();if(de.a.marker([c.station.location.lat,c.station.location.lon]).addTo(e.instance.map).bindPopup(c.station.name+"<br>"+c.line.name+"<br>"+u),o>0){var l=[[c.station.location.lat,c.station.location.lon],[t.path[o-1].station.location.lat,t.path[o-1].station.location.lon]],d=de.a.polyline(l).addTo(i.map);c.line.name!==t.path[o-1].line.name&&s++,d.setStyle({color:n[s],weight:6})}}))}}],[{key:"getInstance",value:function(){var t=je()("#mapdiv-connection"),n=t.width();return t.css("height",n+"px"),e.instance||(e.instance=new e),e.instance}}]),e}());Ct.instance=void 0,Ct.isLayerAdded=!1;var Rt=function(e){var t=["blue","yellow","green","red"];return Object(i.useEffect)((function(){var n=Ct.getInstance();return n.addMap(),void 0!==e.path&&n.addConnections(e,t),function(){n.removeMap()}})),Object(ie.jsx)("div",{id:"mapdiv-connection"})},qt=function(){for(var e=Object(oe.g)().stations,t=Object(o.c)((function(e){return e.data.data.stations})),n=Object(o.c)((function(e){return e.data.data.lines})),i=e.split("-"),a=[],s=function(e){var s=i[e],c=i[e+1],o=parseInt(i[e+2]),r="false"!==i[e+3];a.push({station:t.find((function(e){return e.id.toString()===c})),line:n.find((function(e){return e.name===s})),time:o,reverse:r})},c=0;c<i.length-3;c+=4)s(c);return Object(ie.jsxs)("div",{className:"connection-details",children:[Object(ie.jsx)(Rt,{path:a}),Object(ie.jsx)(It,{path:a,colors:["#c8c7f0","#ebeba7","#ccf0c7","#f2a083"]})]})},Yt=function(){return Object(ie.jsxs)(oe.c,{children:[Object(ie.jsx)(oe.a,{path:"/linie/:name",component:Mt}),Object(ie.jsx)(oe.a,{path:"/przystanki/:id",component:Nt}),Object(ie.jsx)(oe.a,{path:"/connection/:stations",component:qt})]})};var Pt=function(){return Object(ie.jsx)(o.a,{store:ee,children:Object(ie.jsx)("div",{className:"App","data-testid":"app",children:Object(ie.jsxs)(ne.a,{basename:"/Railways-connections",children:[Object(ie.jsx)(ce,{}),Object(ie.jsx)(Ot,{}),Object(ie.jsx)(Yt,{})]})})})},Ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,253)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))};c.a.render(Object(ie.jsx)(a.a.StrictMode,{children:Object(ie.jsx)(Pt,{})}),document.getElementById("root")),Ut()}},[[213,1,2]]]);
//# sourceMappingURL=main.ab99cda7.chunk.js.map